{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Per capita greenhouse gas emission",
  "width": 800,
  "height": 400,
  "params": [
      {
          "name": "zoom_level",
          "value": 150,
          "bind":{
              "input": "range",
              "min": 100,
              "max": 1000,
              "step": 25,
              "name": "Zoom:"
          }}
  ],
  "projection": {
      "type": "equalEarth",
      "scale": {"expr": "zoom_level"}},
  "data":{
      "url" : "https://raw.githubusercontent.com/AaronTjc/Data-Visualisation-2/refs/heads/main/JS/ne_110m%20(2).json",
      "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },
  "transform": [
      {
          "lookup": "properties.NAME",
          "from": {
              "data" : {
                  "url": "https://raw.githubusercontent.com/AaronTjc/Data-Visualisation-2/refs/heads/main/Data/ghg-emissions-2022.csv"
              },
              "key": "Country",
              "fields": ["Per-capita greenhouse gas emissions"]
              
          }
      }
      
  ],

  "selection": {
      "legendSelection":{
          "type": "multi",
          "fields": ["Per-capital greenhouse gas emissions"],
          "bind": "legend"
      }
  },
  "mark": {"type": "geoshape", "stroke": "#7e7e7e", "strokeWidth": 0.5},
  "encoding": {
      "color": {
          "field" : "Per-capita greenhouse gas emissions",
          "type": "quantitative",
          "scale": {
              "type": "threshold",
              "domain": [0,1,2,5,10,20],
              "range": ["#fef6e4", "#fddc9a", "#f9c565", "#f69b3e", "#e76f3e","#dc4a20","#a83f26" ]
          }
      },

      "opacity":{
          "condition": {"selection": "legendSelection", "value": 2.5},
          "value": 0.2

      },
      "tooltip":[
          {"field": "properties.NAME", "type": "nominal", "title": "Country:"},
          {"field": "Per-capita greenhouse gas emissions", "type": "quantitative",
          "title": "Per-capita greenhouse gas emissions (in tonnes):"
          } 
      ]
  }



}
